<template>
  <div class="self-challenge">
    <h2>ğŸ¯ è‡ªæˆ‘è©¦ç…‰ - Reactivity éŸ¿æ‡‰å¼</h2>
    <p class="route-info">ğŸ“ è·¯å¾‘ï¼š/ReactivitySamples/SelfChallengeDemo.vue</p>
    <p class="description">
      ğŸ“ <strong>å­¸ç¿’ç›®æ¨™ï¼š</strong>æŒæ¡ Vue 3 éŸ¿æ‡‰å¼ç³»çµ±çš„åŸºæœ¬æ¦‚å¿µï¼Œç†è§£ ref å’Œ reactive çš„ä½¿ç”¨æ™‚æ©Ÿ
    </p>

    <div class="challenge-section">
      <h3>ğŸ¯ æŒ‘æˆ°æ¸…å–®</h3>
      <div class="task-list">
        <div class="task-item">
          <input type="checkbox" id="task1">
          <label for="task1">1. å¯¦ä½œåŸºæœ¬çš„ ref éŸ¿æ‡‰å¼è®Šæ•¸</label>
        </div>
        <div class="task-item">
          <input type="checkbox" id="task2">
          <label for="task2">2. å¯¦ä½œ reactive ç‰©ä»¶éŸ¿æ‡‰å¼</label>
        </div>
        <div class="task-item">
          <input type="checkbox" id="task3">
          <label for="task3">3. ç†è§£æ·±å±¤éŸ¿æ‡‰å¼çš„é‹ä½œ</label>
        </div>
        <div class="task-item">
          <input type="checkbox" id="task4">
          <label for="task4">4. å¯¦ä½œ computed éŸ¿æ‡‰å¼è¨ˆç®—</label>
        </div>
        <div class="task-item">
          <input type="checkbox" id="task5">
          <label for="task5">5. è™•ç†éŸ¿æ‡‰å¼é™£åˆ—æ“ä½œ</label>
        </div>
        <div class="task-item">
          <input type="checkbox" id="task6">
          <label for="task6">6. å»ºç«‹å®Œæ•´çš„ç”¨æˆ¶è³‡æ–™ç®¡ç†ç³»çµ±</label>
        </div>
      </div>
    </div>

    <div class="implementation-section">
      <h3>ğŸ‘¨â€ğŸ’» å¯¦ä½œç·´ç¿’è©³æƒ…</h3>
      <p class="implementation-intro">
        ğŸ“‹ <strong>è«‹åœ¨ &lt;script setup&gt; å€åŸŸå®Œæˆä»¥ä¸‹éŸ¿æ‡‰å¼è®Šæ•¸å’Œå‡½æ•¸çš„å¯¦ä½œï¼š</strong>
      </p>

      <div class="implementation-list">
        <div class="implementation-item">
          <div class="function-header">
            <span class="function-number">1.</span>
            <span class="function-name">åŸºæœ¬ ref è®Šæ•¸</span>
            <span class="difficulty easy">ç°¡å–®</span>
          </div>
          <div class="function-description">
            ä½¿ç”¨ ref å‰µå»ºåŸºæœ¬éŸ¿æ‡‰å¼è®Šæ•¸
            <div class="spec-details">
              <strong>ğŸ“‹ è©³ç´°è¦æ ¼ï¼š</strong>
              <ul>
                <li><strong>name (ref)ï¼š</strong>å­—ä¸²é¡å‹ï¼Œé è¨­å€¼ç‚º 'å°æ˜'</li>
                <li><strong>age (ref)ï¼š</strong>æ•¸å­—é¡å‹ï¼Œé è¨­å€¼ç‚º 25</li>
                <li><strong>isStudent (ref)ï¼š</strong>å¸ƒæ—é¡å‹ï¼Œé è¨­å€¼ç‚º true</li>
                <li><strong>hobbies (ref)ï¼š</strong>é™£åˆ—é¡å‹ï¼Œé è¨­å€¼ç‚º ['è®€æ›¸', 'é‹å‹•']</li>
                <li><strong>è¨ªå•ï¼š</strong>åœ¨ template ä¸­ç›´æ¥ä½¿ç”¨ï¼Œåœ¨ script ä¸­ä½¿ç”¨ .value</li>
              </ul>
            </div>
            <div class="task-requirements">
              <h5>ğŸ¯ å¯¦ä½œä»»å‹™ï¼š</h5>
              <ul>
                <li>ä½¿ç”¨ ref() å‰µå»ºéŸ¿æ‡‰å¼è®Šæ•¸</li>
                <li>åœ¨ template ä¸­é¡¯ç¤ºè³‡æ–™</li>
                <li>å¯¦ä½œè³‡æ–™ä¿®æ”¹åŠŸèƒ½</li>
                <li>è§€å¯ŸéŸ¿æ‡‰å¼æ›´æ–°æ•ˆæœ</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="implementation-item">
          <div class="function-header">
            <span class="function-number">2.</span>
            <span class="function-name">reactive ç‰©ä»¶</span>
            <span class="difficulty medium">ä¸­ç­‰</span>
          </div>
          <div class="function-description">
            ä½¿ç”¨ reactive å‰µå»ºè¤‡é›œç‰©ä»¶éŸ¿æ‡‰å¼
            <div class="spec-details">
              <strong>ğŸ“‹ è©³ç´°è¦æ ¼ï¼š</strong>
              <ul>
                <li><strong>userProfile (reactive)ï¼š</strong>åŒ…å« name, email, avatar å±¬æ€§</li>
                <li><strong>settings (reactive)ï¼š</strong>åŒ…å« theme, language, notifications è¨­å®š</li>
                <li><strong>stats (reactive)ï¼š</strong>åŒ…å« loginCount, lastLoginTime, score çµ±è¨ˆ</li>
                <li><strong>åµŒå¥—ç‰©ä»¶ï¼š</strong>æ”¯æ´æ·±å±¤éŸ¿æ‡‰å¼æ›´æ–°</li>
              </ul>
            </div>
            <div class="task-requirements">
              <h5>ğŸ¯ å¯¦ä½œä»»å‹™ï¼š</h5>
              <ul>
                <li>ä½¿ç”¨ reactive() å‰µå»ºç‰©ä»¶éŸ¿æ‡‰å¼</li>
                <li>è™•ç†åµŒå¥—ç‰©ä»¶å±¬æ€§</li>
                <li>å¯¦ä½œç‰©ä»¶å±¬æ€§æ›´æ–°</li>
                <li>ç†è§£æ·±å±¤éŸ¿æ‡‰å¼ç‰¹æ€§</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="implementation-item">
          <div class="function-header">
            <span class="function-number">3.</span>
            <span class="function-name">updateUserName(newName)</span>
            <span class="difficulty easy">ç°¡å–®</span>
          </div>
          <div class="function-description">
            æ›´æ–°ç”¨æˆ¶åç¨±ï¼ˆåŒæ™‚æ›´æ–° ref å’Œ reactiveï¼‰
            <div class="spec-details">
              <strong>ğŸ“‹ è©³ç´°è¦æ ¼ï¼š</strong>
              <ul>
                <li><strong>åƒæ•¸ï¼š</strong>newName (string) - æ–°çš„ç”¨æˆ¶åç¨±</li>
                <li><strong>é©—è­‰ï¼š</strong>æª¢æŸ¥åç¨±ä¸ç‚ºç©ºä¸”é•·åº¦åœ¨ 2-20 å­—å…ƒ</li>
                <li><strong>æ›´æ–°ï¼š</strong>åŒæ™‚æ›´æ–° name.value å’Œ userProfile.name</li>
                <li><strong>æ™‚é–“æˆ³ï¼š</strong>æ›´æ–° stats.lastLoginTime ç‚ºç•¶å‰æ™‚é–“</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="implementation-item">
          <div class="function-header">
            <span class="function-number">4.</span>
            <span class="function-name">userDisplayName (computed)</span>
            <span class="difficulty medium">ä¸­ç­‰</span>
          </div>
          <div class="function-description">
            è¨ˆç®—ç”¨æˆ¶é¡¯ç¤ºåç¨±
            <div class="spec-details">
              <strong>ğŸ“‹ è©³ç´°è¦æ ¼ï¼š</strong>
              <ul>
                <li><strong>é‚è¼¯ï¼š</strong>çµåˆ name.value å’Œ age.value</li>
                <li><strong>æ ¼å¼ï¼š</strong>'{name} ({age}æ­²)' å¦‚æœæ˜¯å­¸ç”Ÿå‰‡åŠ ä¸Š '(å­¸ç”Ÿ)'</li>
                <li><strong>ç¤ºä¾‹ï¼š</strong>'å°æ˜ (25æ­²) (å­¸ç”Ÿ)' æˆ– 'å°è¯ (30æ­²)'</li>
                <li><strong>éŸ¿æ‡‰æ€§ï¼š</strong>ç•¶ nameã€age æˆ– isStudent æ”¹è®Šæ™‚è‡ªå‹•æ›´æ–°</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="hint-section">
        <h4>ğŸ’¡ é–‹ç™¼æç¤º</h4>
        <details>
          <summary>é»æ“ŠæŸ¥çœ‹é–‹ç™¼æç¤º</summary>
          <div class="hints">
            <h5>å¸¸ç”¨èªæ³•åƒè€ƒï¼š</h5>
            <pre><code>// åŸºæœ¬éŸ¿æ‡‰å¼è®Šæ•¸
import { ref, reactive, computed } from 'vue'

// ref é©ç”¨æ–¼åŸºæœ¬é¡å‹
const name = ref('å°æ˜')
const age = ref(25)

// reactive é©ç”¨æ–¼ç‰©ä»¶å’Œé™£åˆ—
const userProfile = reactive({
  name: 'å°æ˜',
  email: 'example@email.com'
})

// è¨ˆç®—å±¬æ€§
const displayName = computed(() => {
  return `${name.value} (${age.value}æ­²)`
})</code></pre>

            <h5>é‡è¦æ¦‚å¿µï¼š</h5>
            <ul>
              <li><strong>ref vs reactiveï¼š</strong>ref é©ç”¨æ–¼åŸºæœ¬é¡å‹ï¼Œreactive é©ç”¨æ–¼ç‰©ä»¶å’Œé™£åˆ—</li>
              <li><strong>.value è¨ªå•ï¼š</strong>ref åœ¨ script ä¸­éœ€è¦ .valueï¼Œtemplate ä¸­è‡ªå‹•è§£åŒ…</li>
              <li><strong>éŸ¿æ‡‰æ€§ä¿æŒï¼š</strong>é¿å…è§£æ§‹ reactive ç‰©ä»¶ï¼Œæœƒå¤±å»éŸ¿æ‡‰æ€§</li>
              <li><strong>é™£åˆ—æ–¹æ³•ï¼š</strong>push(), splice(), pop() ç­‰æ–¹æ³•æœƒè§¸ç™¼éŸ¿æ‡‰å¼æ›´æ–°</li>
              <li><strong>computed ç‰¹æ€§ï¼š</strong>åŸºæ–¼ä¾è³´çš„éŸ¿æ‡‰å¼è³‡æ–™ï¼Œç•¶ä¾è³´æ”¹è®Šæ™‚è‡ªå‹•é‡æ–°è¨ˆç®—</li>
            </ul>
          </div>
        </details>
      </div>
    </div>

    <!-- å­¸å“¡ç·´ç¿’å€å¡Š -->
    <div class="demo-section">
      <h3>ğŸ”§ å­¸å“¡ç·´ç¿’å€åŸŸ</h3>
      <p class="hint">
        ğŸ’¡ <strong>æç¤ºï¼š</strong>è«‹æ ¹æ“šä¸Šæ–¹çš„å¯¦ä½œç·´ç¿’è©³æƒ…å®Œæˆä»¥ä¸‹åŠŸèƒ½å¯¦ä½œ
      </p>

      <!-- ä»»å‹™ä¸€ï¼šåŸºæœ¬ ref éŸ¿æ‡‰å¼ -->
      <div class="task-section">
        <h4>ä»»å‹™ä¸€ï¼šåŸºæœ¬ ref éŸ¿æ‡‰å¼å¯¦ä½œ</h4>
        <div class="practice-area">
          <div class="user-info">
            <h5>ç”¨æˆ¶åŸºæœ¬è³‡è¨Š</h5>
            <!-- TODO: å­¸å“¡éœ€è¦åœ¨é€™è£¡å¯¦ä½œéŸ¿æ‡‰å¼è³‡æ–™é¡¯ç¤º -->
            <p>å§“åï¼š[è«‹å¯¦ä½œ name é¡¯ç¤º]</p>
            <p>å¹´é½¡ï¼š[è«‹å¯¦ä½œ age é¡¯ç¤º]</p>
            <p>èº«ä»½ï¼š[è«‹å¯¦ä½œ isStudent æ¢ä»¶é¡¯ç¤º]</p>
            <p>èˆˆè¶£ï¼š[è«‹å¯¦ä½œ hobbies é™£åˆ—é¡¯ç¤º]</p>
          </div>

          <div class="controls">
            <input placeholder="ä¿®æ”¹å§“å" class="input-field">
            <input placeholder="ä¿®æ”¹å¹´é½¡" type="number" class="input-field">
            <label class="checkbox-label">
              <input type="checkbox">
              æ˜¯å­¸ç”Ÿ
            </label>
          </div>
        </div>
      </div>

      <!-- ä»»å‹™äºŒï¼šreactive ç‰©ä»¶éŸ¿æ‡‰å¼ -->
      <div class="task-section">
        <h4>ä»»å‹™äºŒï¼šreactive ç‰©ä»¶éŸ¿æ‡‰å¼å¯¦ä½œ</h4>
        <div class="practice-area">
          <div class="profile-section">
            <h5>ç”¨æˆ¶æª”æ¡ˆï¼ˆreactiveï¼‰</h5>
            <!-- TODO: å­¸å“¡éœ€è¦åœ¨é€™è£¡å¯¦ä½œ reactive ç‰©ä»¶é¡¯ç¤º -->
            <p>æª”æ¡ˆåç¨±ï¼š[è«‹å¯¦ä½œ userProfile.name]</p>
            <p>é›»å­éƒµä»¶ï¼š[è«‹å¯¦ä½œ userProfile.email]</p>
            <p>é ­åƒï¼š[è«‹å¯¦ä½œ userProfile.avatar]</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { onMounted } from 'vue'

// TODO: å­¸å“¡éœ€è¦åœ¨é€™è£¡å¯¦ä½œéŸ¿æ‡‰å¼è®Šæ•¸å’Œå‡½æ•¸
// éœ€è¦å°å…¥ï¼šref, reactive, computed

// åŸºæœ¬ ref éŸ¿æ‡‰å¼è®Šæ•¸
// const name = ref('å°æ˜')
// const age = ref(25)
// const isStudent = ref(true)
// const hobbies = ref(['è®€æ›¸', 'é‹å‹•'])

// reactive ç‰©ä»¶
// const userProfile = reactive({
//   name: 'å°æ˜',
//   email: 'xiaoming@example.com',
//   avatar: 'https://via.placeholder.com/100'
// })

// è¨ˆç®—å±¬æ€§
// const userDisplayName = computed(() => {
//   // TODO: å¯¦ä½œç”¨æˆ¶é¡¯ç¤ºåç¨±è¨ˆç®—é‚è¼¯
// })

// å‡½æ•¸å¯¦ä½œ
// const updateUserName = (newName) => {
//   // TODO: å¯¦ä½œç”¨æˆ¶åç¨±æ›´æ–°é‚è¼¯
// }

onMounted(() => {
  console.log('éŸ¿æ‡‰å¼çµ„ä»¶å·²è¼‰å…¥')
})
</script>

<style scoped>
@import '@/assets/main.css';

.user-info,
.profile-section {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  margin-top: 1rem;
  flex-wrap: wrap;
}

.input-field {
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  flex: 1;
  min-width: 150px;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}
</style>

<template>
  <div class="self-challenge">
    <h2>ğŸ¯ è‡ªæˆ‘è©¦ç…‰ - Computed è¨ˆç®—å±¬æ€§</h2>
    <p class="route-info">ğŸ“ è·¯å¾‘ï¼š/ComputedSamples/SelfChallengeDemo.vue</p>
    <p class="description">
      ğŸ“ <strong>å­¸ç¿’ç›®æ¨™ï¼š</strong>é€éå»ºç«‹ç°¡å–®çš„å•†å“ç¯©é¸åŠŸèƒ½ï¼ŒæŒæ¡ computed è¨ˆç®—å±¬æ€§çš„åŸºæœ¬ç”¨æ³•
    </p>

    <!-- ç·´ç¿’ä»»å‹™å€å¡Š -->
    <div class="practice-tasks">
      <h3>ğŸš€ ä½ éœ€è¦å®Œæˆçš„ç·´ç¿’ä»»å‹™</h3>
      <div class="task-grid">
        <div class="task-card">
          <div class="task-header">
            <span class="task-number">1</span>
            <h4>é—œéµå­—æœå°‹</h4>
          </div>
          <div class="task-content">
            <p><strong>ç›®æ¨™ï¼š</strong>å¯¦ä½œ `searchedProducts` è¨ˆç®—å±¬æ€§</p>
            <p><strong>è¦æ ¼ï¼š</strong></p>
            <ul>
              <li>ç•¶ `searchKeyword` æœ‰å€¼æ™‚ï¼Œç¯©é¸å‡ºåç¨±åŒ…å«é—œéµå­—çš„å•†å“</li>
              <li>æœå°‹ä¸å€åˆ†å¤§å°å¯«</li>
              <li>ç•¶ `searchKeyword` ç‚ºç©ºæ™‚ï¼Œå›å‚³æ‰€æœ‰å•†å“</li>
            </ul>
            <p><strong>æç¤ºï¼š</strong>ä½¿ç”¨ `filter()` å’Œ `includes()` æ–¹æ³•</p>
          </div>
        </div>

        <div class="task-card">
          <div class="task-header">
            <span class="task-number">2</span>
            <h4>åˆ†é¡ç¯©é¸</h4>
          </div>
          <div class="task-content">
            <p><strong>ç›®æ¨™ï¼š</strong>å¯¦ä½œ `filteredProducts` è¨ˆç®—å±¬æ€§</p>
            <p><strong>è¦æ ¼ï¼š</strong></p>
            <ul>
              <li>çµåˆé—œéµå­—æœå°‹çµæœé€²è¡Œåˆ†é¡ç¯©é¸</li>
              <li>ç•¶ `selectedCategory` æœ‰å€¼æ™‚ï¼Œåªé¡¯ç¤ºè©²åˆ†é¡çš„å•†å“</li>
              <li>ç•¶ `selectedCategory` ç‚ºç©ºæ™‚ï¼Œé¡¯ç¤ºæ‰€æœ‰æœå°‹çµæœ</li>
            </ul>
            <p><strong>æç¤ºï¼š</strong>å…ˆä½¿ç”¨ `searchedProducts` å†é€²è¡Œåˆ†é¡ç¯©é¸</p>
          </div>
        </div>

        <div class="task-card">
          <div class="task-header">
            <span class="task-number">3</span>
            <h4>çµ±è¨ˆè³‡è¨Š</h4>
          </div>
          <div class="task-content">
            <p><strong>ç›®æ¨™ï¼š</strong>å¯¦ä½œçµ±è¨ˆç›¸é—œçš„è¨ˆç®—å±¬æ€§</p>
            <p><strong>è¦æ ¼ï¼š</strong></p>
            <ul>
              <li>`productCount`ï¼šç¯©é¸å¾Œçš„å•†å“æ•¸é‡</li>
              <li>`averagePrice`ï¼šç¯©é¸å¾Œå•†å“çš„å¹³å‡åƒ¹æ ¼ï¼ˆå–æ•´æ•¸ï¼‰</li>
            </ul>
            <p><strong>æç¤ºï¼š</strong>ä½¿ç”¨ `reduce()` æ–¹æ³•è¨ˆç®—ç¸½åƒ¹ï¼Œå†é™¤ä»¥æ•¸é‡</p>
          </div>
        </div>

        <div class="task-card">
          <div class="task-header">
            <span class="task-number">4</span>
            <h4>å•†å“åˆ—è¡¨æ¸²æŸ“</h4>
          </div>
          <div class="task-content">
            <p><strong>ç›®æ¨™ï¼š</strong>åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“ç¯©é¸å¾Œçš„å•†å“</p>
            <p><strong>è¦æ ¼ï¼š</strong></p>
            <ul>
              <li>ä½¿ç”¨ `v-for` æ¸²æŸ“ `filteredProducts`</li>
              <li>é¡¯ç¤ºå•†å“åç¨±ã€åˆ†é¡ã€åƒ¹æ ¼</li>
              <li>ç•¶æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„å•†å“æ™‚ï¼Œé¡¯ç¤ºæç¤ºè¨Šæ¯</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- ç¯©é¸ä»‹é¢ -->
    <div class="demo-section">
      <h3>ğŸ” ç¯©é¸æ¢ä»¶</h3>
      <div class="filters">
        <div class="filter-group">
          <label>ğŸ” æœå°‹å•†å“ï¼š</label>
          <input v-model="searchKeyword" placeholder="è¼¸å…¥å•†å“åç¨±..." class="form-input">
        </div>

        <div class="filter-group">
          <label>ğŸ“‚ å•†å“åˆ†é¡ï¼š</label>
          <select v-model="selectedCategory" class="form-select">
            <option value="">å…¨éƒ¨åˆ†é¡</option>
            <option value="é›»å­ç”¢å“">é›»å­ç”¢å“</option>
            <option value="æœè£">æœè£</option>
            <option value="å®¶å…·">å®¶å…·</option>
            <option value="æ›¸ç±">æ›¸ç±</option>
          </select>
        </div>
      </div>
    </div>

    <!-- çµ±è¨ˆè³‡è¨Š -->
    <div class="demo-section">
      <h3>ğŸ“Š çµ±è¨ˆè³‡è¨Š</h3>
      <div class="stats-row">
        <div class="stat-item">
          <span class="stat-label">æ‰¾åˆ°å•†å“ï¼š</span>
          <span class="stat-value">{{ productCount }} ä»¶</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">å¹³å‡åƒ¹æ ¼ï¼š</span>
          <span class="stat-value">${{ averagePrice }}</span>
        </div>
      </div>
    </div>

    <!-- å•†å“åˆ—è¡¨ -->
    <div class="demo-section">
      <h3>ğŸ›ï¸ å•†å“åˆ—è¡¨</h3>
      <div class="product-list">
        <!-- ğŸš€ ä»»å‹™4ï¼šè«‹åœ¨é€™è£¡ä½¿ç”¨ v-for æ¸²æŸ“ filteredProducts -->
        <!-- æç¤ºï¼šè¨˜å¾—è™•ç†ç©ºåˆ—è¡¨çš„æƒ…æ³ -->

        <!-- æš«æ™‚é¡¯ç¤ºæç¤ºï¼Œå­¸å“¡éœ€è¦å¯¦ä½œ v-for æ¸²æŸ“ -->
        <div v-if="filteredProducts.length === 0" class="no-products">
          <p>æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„å•†å“</p>
        </div>

        <!-- å­¸å“¡éœ€è¦åœ¨é€™è£¡æ·»åŠ  v-for ä¾†æ¸²æŸ“å•†å“ -->
        <p class="placeholder">è«‹å®Œæˆä»»å‹™4ï¼šä½¿ç”¨ v-for æ¸²æŸ“ filteredProducts ä¸­çš„å•†å“</p>

        <!-- åƒè€ƒæ ¼å¼ï¼ˆå­¸å“¡å¯ä»¥åƒè€ƒä½†éœ€è¦è‡ªå·±å¯¦ä½œï¼‰ï¼š
        <div v-for="product in filteredProducts" :key="product.id" class="product-item">
          <h4>{{ product.name }}</h4>
          <span class="category">{{ product.category }}</span>
          <p class="price">${{ product.price }}</p>
        </div>
        -->
      </div>
    </div>

    <!-- é€²éšæç¤º -->
    <div class="hint-section">
      <h4>ğŸ’¡ å¯¦ä½œæç¤º</h4>
      <details>
        <summary>ğŸ“‹ Computed åŸºæœ¬èªæ³•è¤‡ç¿’</summary>
        <pre><code>// åŸºæœ¬ computed å¯«æ³•
const computedProperty = computed(() => {
  // åœ¨é€™è£¡å¯«è¨ˆç®—é‚è¼¯
  return someValue
})

// ç¯©é¸ç¯„ä¾‹
const filtered = computed(() => {
  return items.value.filter(item => {
    // ç¯©é¸æ¢ä»¶
    return item.name.includes(keyword.value)
  })
})</code></pre>
      </details>

      <details>
        <summary>ğŸ” å­—ä¸²æœå°‹æç¤º</summary>
        <pre><code>// ä¸å€åˆ†å¤§å°å¯«æœå°‹
const searchResult = computed(() => {
  if (!searchKeyword.value) return products.value

  return products.value.filter(product => {
    return product.name
      .toLowerCase()
      .includes(searchKeyword.value.toLowerCase())
  })
})</code></pre>
      </details>

      <details>
        <summary>ğŸ“Š çµ±è¨ˆè¨ˆç®—æç¤º</summary>
        <pre><code>// è¨ˆç®—å¹³å‡å€¼
const average = computed(() => {
  const items = filteredProducts.value
  if (items.length === 0) return 0

  const total = items.reduce((sum, item) => sum + item.price, 0)
  return Math.round(total / items.length)
})</code></pre>
      </details>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

// å•†å“è³‡æ–™ï¼ˆç°¡åŒ–ç‰ˆï¼‰
const products = ref([
  { id: 1, name: 'iPhone 14', category: 'é›»å­ç”¢å“', price: 25000 },
  { id: 2, name: 'MacBook Pro', category: 'é›»å­ç”¢å“', price: 55000 },
  { id: 3, name: 'é‹å‹•Tæ¤', category: 'æœè£', price: 299 },
  { id: 4, name: 'ç‰›ä»”è¤²', category: 'æœè£', price: 1200 },
  { id: 5, name: 'è¾¦å…¬æ¤…', category: 'å®¶å…·', price: 3500 },
  { id: 6, name: 'æ›¸æ¡Œ', category: 'å®¶å…·', price: 8000 },
  { id: 7, name: 'Vue.js æ•™ç¨‹', category: 'æ›¸ç±', price: 450 },
  { id: 8, name: 'JavaScript æŒ‡å—', category: 'æ›¸ç±', price: 380 }
])

// ç¯©é¸æ¢ä»¶
const searchKeyword = ref('')
const selectedCategory = ref('')

// ğŸš€ ä»»å‹™1ï¼šè«‹å®Œæˆé—œéµå­—æœå°‹çš„è¨ˆç®—å±¬æ€§
const searchedProducts = computed(() => {
  // åœ¨é€™è£¡å¯¦ä½œé—œéµå­—æœå°‹é‚è¼¯
  // æç¤ºï¼šç•¶ searchKeyword ç‚ºç©ºæ™‚ï¼Œå›å‚³æ‰€æœ‰å•†å“
  // ç•¶æœ‰é—œéµå­—æ™‚ï¼Œç¯©é¸å‡ºåç¨±åŒ…å«é—œéµå­—çš„å•†å“ï¼ˆä¸å€åˆ†å¤§å°å¯«ï¼‰

  // æš«æ™‚å›å‚³æ‰€æœ‰å•†å“ï¼Œå­¸å“¡éœ€è¦å¯¦ä½œç¯©é¸é‚è¼¯
  return products.value // è«‹ä¿®æ”¹é€™è¡Œ
})

// ğŸš€ ä»»å‹™2ï¼šè«‹å®Œæˆåˆ†é¡ç¯©é¸çš„è¨ˆç®—å±¬æ€§
const filteredProducts = computed(() => {
  // åœ¨é€™è£¡å¯¦ä½œåˆ†é¡ç¯©é¸é‚è¼¯
  // æç¤ºï¼šå…ˆä½¿ç”¨ searchedProducts çš„çµæœï¼Œå†æ ¹æ“š selectedCategory ç¯©é¸

  // æš«æ™‚å›å‚³æœå°‹çµæœï¼Œå­¸å“¡éœ€è¦åŠ å…¥åˆ†é¡ç¯©é¸é‚è¼¯
  return searchedProducts.value // è«‹ä¿®æ”¹é€™è¡Œ
})

// ğŸš€ ä»»å‹™3ï¼šè«‹å®Œæˆçµ±è¨ˆç›¸é—œçš„è¨ˆç®—å±¬æ€§
const productCount = computed(() => {
  // å›å‚³ç¯©é¸å¾Œçš„å•†å“æ•¸é‡
  // æš«æ™‚å›å‚³ç¯©é¸çµæœçš„é•·åº¦
  return filteredProducts.value.length // è«‹ä¿®æ”¹é€™è¡Œ
})

const averagePrice = computed(() => {
  // è¨ˆç®—ç¯©é¸å¾Œå•†å“çš„å¹³å‡åƒ¹æ ¼ï¼ˆå–æ•´æ•¸ï¼‰
  // æç¤ºï¼šç•¶å•†å“æ•¸é‡ç‚º0æ™‚ï¼Œå›å‚³0

  // æš«æ™‚å›å‚³0ï¼Œå­¸å“¡éœ€è¦å¯¦ä½œå¹³å‡åƒ¹æ ¼è¨ˆç®—
  return 0 // è«‹ä¿®æ”¹é€™è¡Œ
})
</script>

<style scoped>
.self-challenge {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}



.description {
  background: #f3e5f5;
  padding: 1rem;
  border-radius: 6px;
  margin: 1rem 0;
  border-left: 4px solid #9c27b0;
}

/* ç·´ç¿’ä»»å‹™å€å¡Š */
.practice-tasks {
  background: #fff3e0;
  padding: 2rem;
  border-radius: 12px;
  margin: 2rem 0;
  border: 2px solid #ff9800;
}

.task-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.task-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 1px solid #e0e0e0;
}

.task-header {
  background: #ff9800;
  color: white;
  padding: 1rem;
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.task-number {
  background: rgba(255, 255, 255, 0.2);
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
}

.task-header h4 {
  margin: 0;
  font-size: 1.1rem;
}

.task-content {
  padding: 1.5rem;
}

.task-content p {
  margin: 0.5rem 0;
}

.task-content strong {
  color: #d84315;
}

.task-content ul {
  margin: 0.5rem 0;
  padding-left: 1.2rem;
}

.task-content li {
  margin: 0.3rem 0;
  line-height: 1.4;
}

/* å…¶ä»–å€å¡Šæ¨£å¼ */
.demo-section {
  margin: 2rem 0;
  padding: 1.5rem;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background: #fafafa;
}

.demo-section h3 {
  margin-top: 0;
  color: #333;
}

.filters {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1rem 0;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.filter-group label {
  font-weight: bold;
  color: #333;
  font-size: 0.95rem;
}

.form-input,
.form-select {
  padding: 0.8rem;
  border: 2px solid #ddd;
  border-radius: 6px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: #2196f3;
}

.stats-row {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.8rem 1.2rem;
  background: white;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.stat-label {
  color: #666;
  font-weight: 500;
}

.stat-value {
  font-weight: bold;
  color: #1976d2;
  font-size: 1.1rem;
}

.product-list {
  min-height: 100px;
  background: white;
  border-radius: 6px;
  padding: 1rem;
}

.placeholder {
  text-align: center;
  color: #999;
  font-style: italic;
  padding: 2rem;
  background: #f9f9f9;
  border-radius: 6px;
  border: 2px dashed #ddd;
}

.no-products {
  text-align: center;
  color: #666;
  padding: 2rem;
  background: #f5f5f5;
  border-radius: 6px;
  margin: 1rem 0;
}

.product-item {
  background: white;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  padding: 1rem;
  margin: 0.5rem 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.product-item h4 {
  margin: 0 0 0.5rem 0;
  color: #333;
}

.product-item .category {
  background: #e3f2fd;
  color: #1976d2;
  padding: 0.2rem 0.5rem;
  border-radius: 12px;
  font-size: 0.8rem;
  margin-right: 0.5rem;
}

.product-item .price {
  font-size: 1.2rem;
  font-weight: bold;
  color: #d32f2f;
  margin: 0.5rem 0 0 0;
}

/* æç¤ºå€å¡Š */
.hint-section {
  background: #e8f5e8;
  padding: 1.5rem;
  border-radius: 8px;
  margin: 2rem 0;
}

.hint-section h4 {
  margin-top: 0;
  color: #2e7d32;
}

details {
  margin: 1rem 0;
  border: 1px solid #c8e6c9;
  border-radius: 4px;
}

summary {
  cursor: pointer;
  font-weight: bold;
  padding: 1rem;
  background: #c8e6c9;
  border-radius: 4px;
  transition: background-color 0.3s;
}

summary:hover {
  background: #a5d6a7;
}

pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1rem 0;
  font-size: 0.9rem;
}

code {
  font-family: 'Fira Code', 'Courier New', monospace;
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 768px) {
  .self-challenge {
    padding: 1rem;
  }

  .task-grid {
    grid-template-columns: 1fr;
  }

  .filters {
    grid-template-columns: 1fr;
  }

  .stats-row {
    flex-direction: column;
  }
}
</style>

<template>
    <div class="answering-area">
        <h2>ğŸ¯ å¯¦ä½œç·´ç¿’å€ - è¡¨å–®è¼¸å…¥èˆ‡ v-model</h2>
        <p class="description">
            ğŸ“ <strong>ä»»å‹™ï¼š</strong>å»ºç«‹ä¸€å€‹å®Œæ•´çš„ä½¿ç”¨è€…è¨»å†Šç³»çµ±ï¼Œå¯¦ä½œå„ç¨®è¡¨å–®æ§åˆ¶å…ƒä»¶å’Œé©—è­‰
        </p>

        <!-- ä»»å‹™ä¸€ï¼šåŸºæœ¬è³‡æ–™è¡¨å–® -->
        <div class="task-section">
            <h3>ğŸ‘¤ ä»»å‹™ä¸€ï¼šåŸºæœ¬è³‡æ–™</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>ğŸ‘¤ ä½¿ç”¨è€…åç¨±ï¼š</label>
                    <input v-model="formData.username" type="text" placeholder="è«‹è¼¸å…¥ä½¿ç”¨è€…åç¨±" class="form-input"
                        :class="{ 'error': errors.username }">
                    <span v-if="errors.username" class="error-text">{{ errors.username }}</span>
                </div>

                <div class="form-group">
                    <label>ğŸ“§ é›»å­éƒµä»¶ï¼š</label>
                    <input v-model="formData.email" type="email" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶" class="form-input"
                        :class="{ 'error': errors.email }">
                    <span v-if="errors.email" class="error-text">{{ errors.email }}</span>
                </div>

                <div class="form-group">
                    <label>ğŸ”’ å¯†ç¢¼ï¼š</label>
                    <input v-model="formData.password" type="password" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" class="form-input"
                        :class="{ 'error': errors.password }">
                    <span v-if="errors.password" class="error-text">{{ errors.password }}</span>
                </div>

                <div class="form-group">
                    <label>ğŸ”’ ç¢ºèªå¯†ç¢¼ï¼š</label>
                    <input v-model="formData.confirmPassword" type="password" placeholder="è«‹å†æ¬¡è¼¸å…¥å¯†ç¢¼" class="form-input"
                        :class="{ 'error': errors.confirmPassword }">
                    <span v-if="errors.confirmPassword" class="error-text">{{ errors.confirmPassword }}</span>
                </div>
            </div>
        </div>

        <!-- ä»»å‹™äºŒï¼šå€‹äººè³‡è¨Š -->
        <div class="task-section">
            <h3>ğŸ“ ä»»å‹™äºŒï¼šå€‹äººè³‡è¨Š</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>ğŸ‚ å¹´é½¡ï¼š</label>
                    <input v-model.number="formData.age" type="number" placeholder="è«‹è¼¸å…¥å¹´é½¡" class="form-input" min="0"
                        max="120">
                </div>

                <div class="form-group">
                    <label>ğŸ‘« æ€§åˆ¥ï¼š</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input v-model="formData.gender" type="radio" value="male">
                            <span>ç”·æ€§</span>
                        </label>
                        <label class="radio-item">
                            <input v-model="formData.gender" type="radio" value="female">
                            <span>å¥³æ€§</span>
                        </label>
                        <label class="radio-item">
                            <input v-model="formData.gender" type="radio" value="other">
                            <span>å…¶ä»–</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>ğŸ  å±…ä½åŸå¸‚ï¼š</label>
                    <select v-model="formData.city" class="form-select">
                        <option value="">è«‹é¸æ“‡åŸå¸‚</option>
                        <option value="taipei">å°åŒ—å¸‚</option>
                        <option value="taichung">å°ä¸­å¸‚</option>
                        <option value="kaohsiung">é«˜é›„å¸‚</option>
                        <option value="tainan">å°å—å¸‚</option>
                        <option value="taoyuan">æ¡ƒåœ’å¸‚</option>
                    </select>
                </div>

                <div class="form-group full-width">
                    <label>ğŸ’¡ èˆˆè¶£æ„›å¥½ï¼š</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="reading">
                            <span>é–±è®€</span>
                        </label>
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="music">
                            <span>éŸ³æ¨‚</span>
                        </label>
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="sports">
                            <span>é‹å‹•</span>
                        </label>
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="travel">
                            <span>æ—…éŠ</span>
                        </label>
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="cooking">
                            <span>çƒ¹é£ª</span>
                        </label>
                        <label class="checkbox-item">
                            <input v-model="formData.hobbies" type="checkbox" value="photography">
                            <span>æ”å½±</span>
                        </label>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label>ğŸ“ è‡ªæˆ‘ä»‹ç´¹ï¼š</label>
                    <textarea v-model="formData.bio" placeholder="è«‹ç°¡å–®ä»‹ç´¹ä¸€ä¸‹è‡ªå·±..." class="form-textarea"
                        rows="4"></textarea>
                    <div class="char-count">{{ formData.bio.length }} / 500 å­—</div>
                </div>
            </div>
        </div>

        <!-- ä»»å‹™ä¸‰ï¼šè¨­å®šé¸é … -->
        <div class="task-section">
            <h3>âš™ï¸ ä»»å‹™ä¸‰ï¼šå¸³è™Ÿè¨­å®š</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label class="checkbox-item">
                        <input v-model="formData.agreeTerms" type="checkbox">
                        <span>æˆ‘åŒæ„æœå‹™æ¢æ¬¾èˆ‡éš±ç§æ”¿ç­–</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-item">
                        <input v-model="formData.newsletter" type="checkbox">
                        <span>è¨‚é–±é›»å­å ±</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-item">
                        <input v-model="formData.notifications" type="checkbox">
                        <span>æ¥æ”¶æ¨æ’­é€šçŸ¥</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- ä»»å‹™å››ï¼šè¡¨å–®æ§åˆ¶ -->
        <div class="task-section">
            <h3>ğŸ›ï¸ ä»»å‹™å››ï¼šè¡¨å–®æ“ä½œ</h3>
            <div class="form-actions">
                <button @click="validateForm" class="btn btn-primary">é©—è­‰è¡¨å–®</button>
                <button @click="submitForm" :disabled="!isFormValid" class="btn btn-success">æäº¤è¨»å†Š</button>
                <button @click="resetForm" class="btn btn-secondary">é‡ç½®è¡¨å–®</button>
                <button @click="fillSampleData" class="btn btn-info">å¡«å…¥ç¯„ä¾‹è³‡æ–™</button>
            </div>

            <div v-if="submitMessage" class="submit-message" :class="submitStatus">
                {{ submitMessage }}
            </div>
        </div>

        <!-- ä»»å‹™äº”ï¼šè³‡æ–™é è¦½ -->
        <div class="task-section">
            <h3>ğŸ‘ï¸ ä»»å‹™äº”ï¼šå³æ™‚é è¦½</h3>
            <div class="preview-container">
                <h4>ç›®å‰è¡¨å–®è³‡æ–™ï¼š</h4>
                <pre class="data-preview">{{ formDataPreview }}</pre>

                <h4>é©—è­‰ç‹€æ…‹ï¼š</h4>
                <div class="validation-status">
                    <div class="status-item" :class="{ 'valid': !errors.username, 'invalid': errors.username }">
                        ä½¿ç”¨è€…åç¨±ï¼š{{ !errors.username ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ' }}
                    </div>
                    <div class="status-item" :class="{ 'valid': !errors.email, 'invalid': errors.email }">
                        é›»å­éƒµä»¶ï¼š{{ !errors.email ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ' }}
                    </div>
                    <div class="status-item" :class="{ 'valid': !errors.password, 'invalid': errors.password }">
                        å¯†ç¢¼ï¼š{{ !errors.password ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ' }}
                    </div>
                    <div class="status-item"
                        :class="{ 'valid': !errors.confirmPassword, 'invalid': errors.confirmPassword }">
                        ç¢ºèªå¯†ç¢¼ï¼š{{ !errors.confirmPassword ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ' }}
                    </div>
                </div>
            </div>
        </div>

        <!-- é–‹ç™¼æç¤º -->
        <div class="hint-section">
            <h4>ğŸ’¡ é–‹ç™¼æç¤º</h4>
            <ul>
                <li>v-model åŸºæœ¬ç”¨æ³•ï¼šç¶å®š input, textarea, select ç­‰è¡¨å–®å…ƒç´ </li>
                <li>v-model ä¿®é£¾ç¬¦ï¼š.numberï¼ˆæ•¸å­—ï¼‰ï¼Œ.trimï¼ˆå»ç©ºæ ¼ï¼‰ï¼Œ.lazyï¼ˆå¤±ç„¦æ™‚æ›´æ–°ï¼‰</li>
                <li>è¡¨å–®é©—è­‰ï¼šå¯¦ä½œå³æ™‚é©—è­‰å’Œæäº¤å‰é©—è­‰</li>
                <li>checkbox é™£åˆ—ï¼šå¤šé¸æ¡†å¯ä»¥ç¶å®šåˆ°é™£åˆ—</li>
                <li>computed è¨ˆç®—å±¬æ€§ï¼šç”¨æ–¼è¡¨å–®ç‹€æ…‹è¨ˆç®—å’Œè³‡æ–™æ ¼å¼åŒ–</li>
            </ul>
        </div>
    </div>
</template>

<script setup>
import { ref, computed, watch } from 'vue'

// è¡¨å–®è³‡æ–™
const formData = ref({
    username: '',
    email: '',
    password: '',
    confirmPassword: '',
    age: null,
    gender: '',
    city: '',
    hobbies: [],
    bio: '',
    agreeTerms: false,
    newsletter: false,
    notifications: false
})

// éŒ¯èª¤ç‹€æ…‹
const errors = ref({
    username: '',
    email: '',
    password: '',
    confirmPassword: ''
})

// æäº¤ç‹€æ…‹
const submitMessage = ref('')
const submitStatus = ref('')

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ validateUsername æ–¹æ³•
// eslint-disable-next-line no-unused-vars
const validateUsername = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œä½¿ç”¨è€…åç¨±é©—è­‰é‚è¼¯
    // è¦æ±‚ï¼š3-20å­—å…ƒï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•¸å­—ã€åº•ç·š
    console.log('è«‹å¯¦ä½œä½¿ç”¨è€…åç¨±é©—è­‰åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ validateEmail æ–¹æ³•
// eslint-disable-next-line no-unused-vars
const validateEmail = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œé›»å­éƒµä»¶é©—è­‰é‚è¼¯
    // è¦æ±‚ï¼šç¬¦åˆé›»å­éƒµä»¶æ ¼å¼
    console.log('è«‹å¯¦ä½œé›»å­éƒµä»¶é©—è­‰åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ validatePassword æ–¹æ³•
// eslint-disable-next-line no-unused-vars
const validatePassword = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œå¯†ç¢¼é©—è­‰é‚è¼¯
    // è¦æ±‚ï¼šè‡³å°‘8å­—å…ƒï¼ŒåŒ…å«å¤§å°å¯«å­—æ¯å’Œæ•¸å­—
    console.log('è«‹å¯¦ä½œå¯†ç¢¼é©—è­‰åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ validateConfirmPassword æ–¹æ³•
// eslint-disable-next-line no-unused-vars
const validateConfirmPassword = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œç¢ºèªå¯†ç¢¼é©—è­‰é‚è¼¯
    // è¦æ±‚ï¼šå¿…é ˆèˆ‡å¯†ç¢¼ç›¸åŒ
    console.log('è«‹å¯¦ä½œç¢ºèªå¯†ç¢¼é©—è­‰åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ validateForm æ–¹æ³•
const validateForm = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œå®Œæ•´è¡¨å–®é©—è­‰é‚è¼¯
    // å‘¼å«æ‰€æœ‰é©—è­‰æ–¹æ³•
    console.log('è«‹å¯¦ä½œè¡¨å–®é©—è­‰åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ isFormValid è¨ˆç®—å±¬æ€§
const isFormValid = computed(() => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œè¡¨å–®æœ‰æ•ˆæ€§æª¢æŸ¥
    // æª¢æŸ¥æ‰€æœ‰å¿…è¦æ¬„ä½éƒ½å·²å¡«å¯«ä¸”ç„¡éŒ¯èª¤
    return false
})

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ formDataPreview è¨ˆç®—å±¬æ€§
const formDataPreview = computed(() => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œè¡¨å–®è³‡æ–™æ ¼å¼åŒ–é è¦½
    // å°‡ formData æ ¼å¼åŒ–ç‚ºæ˜“è®€çš„ JSON å­—ä¸²
    return JSON.stringify(formData.value, null, 2)
})

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ submitForm æ–¹æ³•
const submitForm = async () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œè¡¨å–®æäº¤é‚è¼¯
    // 1. æœ€çµ‚é©—è­‰
    // 2. æ¨¡æ“¬ API æäº¤
    // 3. é¡¯ç¤ºçµæœè¨Šæ¯
    console.log('è«‹å¯¦ä½œè¡¨å–®æäº¤åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ resetForm æ–¹æ³•
const resetForm = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œè¡¨å–®é‡ç½®é‚è¼¯
    // å°‡æ‰€æœ‰æ¬„ä½é‡ç½®ç‚ºåˆå§‹å€¼
    console.log('è«‹å¯¦ä½œè¡¨å–®é‡ç½®åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ fillSampleData æ–¹æ³•
const fillSampleData = () => {
    // è«‹åœ¨é€™è£¡å¯¦ä½œå¡«å…¥ç¯„ä¾‹è³‡æ–™çš„é‚è¼¯
    // å¡«å…¥ä¸€çµ„æ¸¬è©¦è³‡æ–™æ–¹ä¾¿é–‹ç™¼æ¸¬è©¦
    console.log('è«‹å¯¦ä½œå¡«å…¥ç¯„ä¾‹è³‡æ–™åŠŸèƒ½')
}

// ğŸ¯ ä»»å‹™ï¼šå¯¦ä½œ watch ç›£è½å™¨
// ç›£è½è¡¨å–®æ¬„ä½è®ŠåŒ–é€²è¡Œå³æ™‚é©—è­‰
watch(() => formData.value.username, () => {
    // ç›£è½ä½¿ç”¨è€…åç¨±è®ŠåŒ–
    console.log('è«‹å¯¦ä½œä½¿ç”¨è€…åç¨±å³æ™‚é©—è­‰')
})

watch(() => formData.value.email, () => {
    // ç›£è½é›»å­éƒµä»¶è®ŠåŒ–
    console.log('è«‹å¯¦ä½œé›»å­éƒµä»¶å³æ™‚é©—è­‰')
})

watch(() => formData.value.password, () => {
    // ç›£è½å¯†ç¢¼è®ŠåŒ–
    console.log('è«‹å¯¦ä½œå¯†ç¢¼å³æ™‚é©—è­‰')
})

watch(() => formData.value.confirmPassword, () => {
    // ç›£è½ç¢ºèªå¯†ç¢¼è®ŠåŒ–
    console.log('è«‹å¯¦ä½œç¢ºèªå¯†ç¢¼å³æ™‚é©—è­‰')
})
</script>

<style scoped>
.answering-area {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

.task-section {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 8px;
    margin: 2rem 0;
    border-left: 4px solid #fd7e14;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-group label {
    font-weight: bold;
    color: #495057;
}

.form-input,
.form-select,
.form-textarea {
    padding: 0.75rem;
    border: 2px solid #dee2e6;
    border-radius: 4px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: #fd7e14;
}

.form-input.error,
.form-select.error,
.form-textarea.error {
    border-color: #dc3545;
}

.error-text {
    color: #dc3545;
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

.radio-group,
.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
}

.radio-item,
.checkbox-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-weight: normal;
}

.radio-item input,
.checkbox-item input {
    margin: 0;
}

.char-count {
    font-size: 0.875rem;
    color: #6c757d;
    text-align: right;
}

.form-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.btn-primary {
    background: #007bff;
    color: white;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-success {
    background: #28a745;
    color: white;
}

.btn-info {
    background: #17a2b8;
    color: white;
}

.btn:hover:not(:disabled) {
    opacity: 0.9;
}

.submit-message {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
    font-weight: bold;
}

.submit-message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.submit-message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.preview-container {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.data-preview {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 4px;
    border: 1px solid #dee2e6;
    font-size: 0.875rem;
    overflow-x: auto;
    max-height: 300px;
    overflow-y: auto;
}

.validation-status {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.status-item {
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-weight: bold;
}

.status-item.valid {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.status-item.invalid {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.hint-section {
    background: #fff3cd;
    padding: 1.5rem;
    border-radius: 8px;
    margin-top: 2rem;
    border-left: 4px solid #ffc107;
}

.hint-section ul {
    margin: 0.5rem 0;
    padding-left: 1.5rem;
}

.hint-section li {
    margin-bottom: 0.5rem;
}

@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }

    .form-actions {
        flex-direction: column;
    }

    .validation-status {
        grid-template-columns: 1fr;
    }

    .radio-group,
    .checkbox-group {
        flex-direction: column;
        gap: 0.5rem;
    }
}
</style>
